# Claude Code on the Web - ベストプラクティスガイド

このドキュメントは、Claude Code on the Web（ブラウザ版）を使用する際のベストプラクティスとTipsをまとめたものです。

## 概要

Claude Code on the Webは、ブラウザから直接アクセスできるClaude Codeの実装です。GitHubリポジトリと連携し、コードの編集、レビュー、コミット、PR作成などを行えます。

### CLI版との主な違い

| 機能 | Web版 | CLI版 |
|------|-------|-------|
| 実行環境 | ブラウザ | ローカルターミナル |
| セットアップ | 不要（即座に利用可能） | npm/npxでインストール必要 |
| GitHubアカウント連携 | 必須 | 任意 |
| ファイルアクセス | リポジトリ内のみ | ローカル全体 |
| ブランチ作成 | 自動生成（`claude/`プレフィックス） | 手動管理 |

## ベストプラクティス

### 1. ブランチ管理

**自動生成されるブランチ名を理解する**
```
claude/{task-description}-{session-id}
例: claude/create-code-web-tutorial-011CV55Q3A2nEdHdySmiajc7
```

- セッションごとに一意のブランチが作成される
- `claude/` プレフィックスは必須（push時に検証される）
- session-idが一致しないとpushが失敗する

**推奨アプローチ:**
```bash
# ブランチ名を確認
git branch

# 常に指定されたブランチで作業
git push -u origin <claude/で始まるブランチ名>
```

### 2. コミットメッセージ

**Conventional Commitsを活用**
```bash
# 良い例
feat: 新機能の追加
fix: バグ修正
docs: ドキュメント更新
refactor: リファクタリング
test: テスト追加

# 悪い例
update
fix bug
change
```

**複数行のコミットメッセージ:**
```bash
git commit -m "$(cat <<'EOF'
feat: ユーザー認証機能を追加

- JWT認証を実装
- ログイン/ログアウトエンドポイントを作成
- セッション管理を追加
EOF
)"
```

### 3. プロジェクトメモリの活用

**3つのメモリタイプ:**

1. **Project Memory** (`./CLAUDE.md`)
   - リポジトリ全体の共通ルール
   - チーム全員に適用される設定
   - バージョン管理される

2. **Project Memory Local** (`./CLAUDE.local.md`)
   - 個人的なプロジェクト設定
   - `.gitignore`に追加推奨
   - ローカル環境固有の設定

3. **User Memory** (`~/.claude/CLAUDE.md`)
   - 個人の全プロジェクト共通設定
   - コーディングスタイルの好み
   - よく使うコマンドのエイリアス

### 4. 効率的な作業フロー

**タスクを明確に伝える:**
```markdown
# 良い例
「ユーザー認証機能を追加してください。
- JWTトークンベースの認証
- ログイン/ログアウトエンドポイント
- ミドルウェアでの認証チェック
完了後、テストを実行してPRを作成してください」

# 悪い例
「認証を追加して」
```

**段階的な依頼:**
```markdown
1. まず既存のコードを確認
2. 設計を提案してもらう
3. 実装を依頼
4. テストとレビュー
5. PR作成とマージ
```

### 5. コードレビューの活用

**AIによるセルフレビュー:**
```markdown
「実装が完了したら、以下の観点でレビューしてください：
- セキュリティ脆弱性（SQLインジェクション、XSSなど）
- パフォーマンスの問題
- コードの可読性
- エッジケースの処理」
```

**レビューコメントの例:**
```markdown
✅ セキュリティ: パスワードは適切にハッシュ化されている
✅ エラーハンドリング: 適切な例外処理が実装されている
⚠️ 改善提案: 関数が長すぎるため、分割を検討
❌ 問題: 入力バリデーションが不足している
```

## Tips & Tricks

### プロンプトエンジニアリング

**具体的な指示を与える:**
```markdown
# 効果的なプロンプト
「`users` テーブルにemailカラムを追加するマイグレーションを作成してください。
- カラムはNOT NULL制約
- UNIQUE制約を追加
- デフォルト値はなし
- Laravel形式のマイグレーションファイルで」

# 曖昧なプロンプト
「usersテーブルを更新して」
```

### コンテキストの提供

**関連ファイルを明示:**
```markdown
「`app/Models/User.php` を参考に、
`app/Models/Article.php` を作成してください。
同じパターンに従ってください」
```

### エラーハンドリング

**エラーが発生した場合:**
```markdown
「先ほどのコマンドでエラーが発生しました：
[エラーメッセージをコピペ]

原因を調査して修正してください」
```

### 複数タスクの並列実行

**依存関係のないタスクは並列で:**
```markdown
「以下のタスクを並行して実行してください：
1. ユニットテストの実行
2. リンターのチェック
3. ビルドの実行」
```

## よくある問題と解決策

### Push失敗（403エラー）

**原因:** ブランチ名が `claude/` プレフィックスで始まっていない、またはsession-idが一致していない

**解決策:**
```bash
# 正しいブランチ名を確認
git branch

# 指定されたブランチ名でpush
git push -u origin claude/task-name-{session-id}
```

### ファイルが見つからない

**原因:** リポジトリ外のファイルにアクセスしようとしている

**解決策:**
- リポジトリ内のファイルのみアクセス可能
- 絶対パスではなく相対パスを使用
- `.gitignore`で除外されていないか確認

### コミットが作成されない

**原因:** 変更がステージングされていない

**解決策:**
```bash
# 変更を確認
git status

# ファイルをステージング
git add <ファイル名>

# コミット
git commit -m "commit message"
```

## セキュリティのベストプラクティス

### 機密情報の取り扱い

**絶対に避けるべきこと:**
- `.env` ファイルをコミットしない
- APIキーやパスワードをハードコードしない
- 秘密鍵やトークンをリポジトリに含めない

**推奨される方法:**
```bash
# .gitignoreに追加
.env
.env.local
*.key
*.pem
credentials.json
```

### コードレビューの必須項目

- [ ] SQLインジェクションの脆弱性チェック
- [ ] XSS（クロスサイトスクリプティング）対策
- [ ] CSRF対策
- [ ] 認証・認可の適切な実装
- [ ] 入力バリデーション
- [ ] エラーメッセージでの情報漏洩防止

### AIコード生成の注意点

**コードは必ずレビューする:**
```markdown
「生成されたコードのセキュリティレビューを実施してください。
特に以下の点を確認：
- 入力検証が適切か
- SQLクエリはプレースホルダーを使用しているか
- 認証が必要な箇所で実装されているか」
```

## ワークフローの推奨パターン

### 新機能開発フロー

```markdown
1. 要件確認
   「〇〇機能を実装したいです。まず現在の実装を確認してください」

2. 設計提案
   「この機能の実装方針を提案してください」

3. 実装
   「提案された設計で実装してください」

4. テスト
   「実装した機能のテストを作成して実行してください」

5. レビュー
   「コードをレビューして、問題があれば指摘してください」

6. コミット
   「問題なければコミットしてください」

7. PR作成
   「PRを作成して、概要を記載してください」
```

### バグ修正フロー

```markdown
1. 問題の特定
   「〇〇のバグを調査してください。エラーログ: [...]」

2. 原因分析
   「バグの原因を特定して説明してください」

3. 修正案提示
   「修正方法を複数提案してください」

4. 修正実装
   「[選択した方法]で修正してください」

5. テスト
   「修正をテストして、バグが解消されたか確認してください」

6. リグレッションテスト
   「既存機能に影響がないか確認してください」
```

### リファクタリングフロー

```markdown
1. 対象コードの分析
   「[ファイル名]のコードを分析して、改善点を指摘してください」

2. リファクタリング計画
   「段階的なリファクタリング計画を立ててください」

3. 段階的実装
   「ステップ1から順番に実装してください。各ステップ後にテストを実行」

4. パフォーマンス確認
   「リファクタリング前後でパフォーマンスを比較してください」
```

## 学習リソース

### 公式ドキュメント
- [Claude Code Documentation](https://docs.anthropic.com/claude/docs/claude-code)
- [Claude Code Security](https://docs.anthropic.com/claude/docs/claude-code-security)

### コミュニティ
- [GitHub Issues](https://github.com/anthropics/claude-code/issues)
- [Discord Community](https://discord.gg/anthropic)

### 参考記事
- [Effective Prompting for Claude Code](https://www.anthropic.com/research/effective-prompting)
- [Best Practices for AI-Assisted Coding](https://www.anthropic.com/research/ai-coding-best-practices)

## まとめ

Claude Code on the Webを効果的に使用するためのポイント：

1. **明確なコミュニケーション**: 具体的で詳細な指示を与える
2. **段階的なアプローチ**: 大きなタスクは小さく分割する
3. **セキュリティ意識**: AIが生成したコードは必ずレビューする
4. **プロジェクトメモリの活用**: CLAUDE.mdでプロジェクト固有のルールを設定
5. **継続的な改善**: フィードバックを通じてワークフローを最適化

Happy Coding with Claude! 🚀
